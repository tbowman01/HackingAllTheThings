#!/bin/bash
# Jump to script folder.
SCRIPT_DIR=$(dirname $0)
cd ${SCRIPT_DIR}

# Default settings.
SCRIPT_BASE=$(pwd)

( javac -source 1.7 -target 1.7 src/Java.java -d ./build/ )

echo "Permissions: all-permissions" > build/manifest.txt

( cd build && jar cvf Java.jar Java.class )

( cd build && keytool -genkey -alias signapplet -keystore mykeystore -keypass mykeypass -storepass password123 )

( cd build && jarsigner -keystore mykeystore -storepass password123 -keypass mykeypass -signedjar SignedJava.jar Java.jar signapplet )

mv build/Java.class output/
mv build/SignedJava.jar output/
cp src/Java.html output/
cp src/nc.exe output/
